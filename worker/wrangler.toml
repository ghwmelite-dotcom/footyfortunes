name = "footyfortunes-api"
main = "src/index.js"
compatibility_date = "2024-01-01"
nodejs_compat = true

[dev]
port = 8787

[[d1_databases]]
binding = "DB"
database_name = "footyfortunes-db"
database_id = "7dcbd968-b74b-44de-8f94-416f79139790"

[[kv_namespaces]]
binding = "CACHE"
id = "becb5a2c61a140a98e11bb47adda4a3c"

[ai]
binding = "AI"

[triggers]
crons = [
  "0 9 * * *",        # Daily at 9 AM: Sync leagues + matches + generate predictions
  "*/15 14-23 * * *", # Every 15 mins from 2 PM to 11 PM: Update live matches
  "*/30 * * * *"      # Every 30 mins: Settle finished matches and update bankrolls
]

[vars]
ENVIRONMENT = "production"